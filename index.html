<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script type="module" crossorigin src="/ff-worker-issue/assets/index-C4ytqugC.js"></script>
  </head>

  <body>
    <p>
      To reproduce:<br />
      Look at your console.<br />
      Get test files from
      <a
        href="https://github.com/Lenni009/ff-worker-issue/tree/main/public/testImages"
        target="_blank"
        >public/testImages</a
      >.<br />
      It will log out how many files have been compressed.<br />
      If everything worked, the counter will match the amount of uploaded files
      and will display a success message at the end.<br />
      In Chrome, this works consistently.<br />
      In Firefox, it depends on what you are doing.<br />
      If you are compressing many small files, one or two might just be
      forgotten, but there won't be any error. (This doesn't happen
      consistently, may need multiple tries)<br />
      If you are compressing very large files, there will be a "Object is no
      longer usable" error. (this happens consistently on my machine)<br />
      That error happens in the
      <a
        href="https://github.com/Lenni009/ff-worker-issue/blob/main/src/lib/worker.ts"
        target="_blank"
        >src/lib/worker.ts</a
      >
      file (marked by comment)
    </p>
    <input id="file-upload" type="file" multiple />
  </body>
</html>
